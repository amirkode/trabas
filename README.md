# Trabas - an HTTP Tunneling Tool
> This project is still under initial development. A breaking change might happen anytime. Please, use it while watching for the latest update.

Trabas is an (ngrok-like inspired) HTTP tunneling written in Rust utilizing standard TCP connection for data exchange. It offers simplicity for basic tunneling usage through an _easy-to-use_ All-in-One CLI. Find out more below!

## Features
- Basic HTTP Tunneling.
- All utilities in one binary file.
- A **Server Service** could handle multiple **Client Services**.
- Rate Limiter.
- Request Cache.
- Many more soon.

## Usage
This tool consists of two services:
- Server Service
  - Listens for public requests and client service.
  - Forwards public request to clent service.
  - Optionally uses Redis for request queueing (recommended for multiple server instances).
- Client Service
  - Forwards request received from server service to the underlying service.

### Install
To use the tool, you can use the all-in-one binary available from the [latest release](https://github.com/amirkode/trabas/releases) or the latest binary generated by the [build action](https://github.com/amirkode/trabas/actions/workflows/ci.yml) for the `main` branch.
Alternatively, you may build the binary file using cargo:
```bash
git clone https://github.com/amirkode/trabas.git && cd trabas
cargo build --release --manifest-path cli/Cargo.toml
```
you can find the built binary in `target/release/trabas`.

Ensure to rename binary file name to `trabas` if necessary.

Once you have the binary installed, you may want to know the usage of the CLI commands. The documentation can be found [here](./doc/site/src/reference_guide/cli/README.md).

Here's how to start tunneling:

**Server Service**

Ensure a redis server is available in your system if the `SV_REDIS_ENABLE` config is set to `true`. Then, initialize the config as mentioned [here](./doc/site/src/reference_guide/configuration/server.md).
Start the service:
```console
foo@bar:~$ trabas server run --public-port 8001 --client-port 8002
```
This starts the public request and client service listeners. You may want to limit the number of requests in a time for every request to each client service, just pass the `--client-request-limit [your value]` argument.

**Client Service**

Initialize the config as mentioned [here](./doc/site/src/reference_guide/configuration/client.md). Start the service:
```console
foo@bar:~$ trabas client serve --host localhost --port 3000
```
this starts the public request and client service listeners.

**User Access**

Once the server and client are connected, you can access the underlying service in several ways:

- **Prefix Path:**  
  `serverhost:8001/[client_id]`

- **Query Parameter:**  
  `serverhost:8001/?trabas_client_id=[client_id]`

Alternatively, after the first request, you can access the service directly at `serverhost:8001` if the client ID is cached (the client will send a `trabas_client_id` cookie header). To enable this feature, start the server service with the `--cache-client-id` flag.  
You may also use a reverse proxy to hide the actual port if needed.

***Note** that the public endpoint will also be returned by the server once a connection successfully established.

## Deployment

For remote server deployment, minimal config as mentioned earlier is adequate for testing purpose. But, you may secure the data exchange between client service and server service through TLS connection. The well-rounded example can be found [here](./doc/site/src/user_guide/tunnel_setup/tls_setup.md).

## Demo
Here's the demo showing how the tunneling works using `Trabas`.

[![Watch the video](https://github.com/user-attachments/assets/47b7397b-45e8-47f5-9296-7f18998cda8e)](https://jotling.liter8.sh/trabas-demo-v1?media=video)

## Change Logs
### **v0.2.0** <sub><sup>(pre-release)</sup></sub>
Native TLS support for server service including SSL key generation, native TLS acceptor, and TOFU (Trust On First Use) option.

### [**v0.1.2**](https://github.com/amirkode/trabas/releases/tag/trabas-v0.1.2) <sub><sup>(2025-07-25)</sup></sub>
Optimized tunnel connection handling (including improved loops, health checks, deadlock prevention, and request distribution). Added version compatibility checks and upstream (underlying service) connection validation.

### [**v0.1.1**](https://github.com/amirkode/trabas/releases/tag/trabas-v0.1.1) <sub><sup>(2025-06-29)</sup></sub>
General improvements, enhanced logging, CI updates, and dependency fixes.

### [**v0.1.0**](https://github.com/amirkode/trabas/releases/tag/trabas-v0.1.0) <sub><sup>(2025-02-24)</sup></sub>
Initial release with core tunneling features, server/client services, rate limiting, request caching, and unified CLI.

## Contribution

We welcome contributions to Trabas! If you'd like to contribute, please submit a pull request with your changes. If you find any issues, please report them in the issue tracker.


## License
Copyright (c) 2024-present [Authors](https://github.com/amirkode/trabas/blob/main/AUTHORS) and Contributors.

Trabas is distributed under the [MIT License](https://opensource.org/license/mit/).
